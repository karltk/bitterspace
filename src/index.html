<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv='Content-type: text/html; charset=utf-8'>
		<meta charset='utf-8'>
		<title>Bitter Space</title>
		<script type='text/javascript' src='game.js'></script>
		<script type='text/javascript' src='painter.js'></script>
		<style type='text/css'>
			#board
			{
				/*border: 1px solid black;*/
			}
		</style>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript">
		
			$(document).ready(function() {
				
				var canvas = document.getElementById('board');

				var simulator = new Simulator(50, 100, 30, 20);
				var MAX_GENERATIONS = 20; 
				for(var g = 0; g < MAX_GENERATIONS; g++) {
					simulator.simulateAndRankOneGeneration(1000);
				}
				var ranked = simulator.getCreaturesByRank()
				var board = simulator.getBoard();
				var creature = ranked[0];
				creature.reset();
				creature.placeOnBoard(board);

				var painter = new Painter(canvas, board);
				
				var doMutation = false;
				
				$("#mutate").click(function() {
					doMutation = true;
				});
				
				setInterval(function()
					{
						if (doMutation == true) {
							creature.genome.mutateGenome();
							doMutation = false;
						}
						creature.step();
						painter.paint();
					}, 100
				);

				painter.paint();
				
			});
		</script>
	</head>
	<body>
		<canvas id="board">
		</canvas>
		<button id="mutate">Mutate!</button>
	</body>
</html>
